{"version":3,"sources":["app.js"],"names":["container","document","getElementById","ajax","XMLHttpRequest","content","createElement","NEWS_URL","CONTENT_URL","store","currentPage","feeds","getData","url","open","send","JSON","parse","response","makeFeed","forEach","feed","read","newsFeed","newsList","template","length","slice","news","push","concat","id","title","comments_count","user","points","time_ago","totalPages","Math","ceil","replace","join","innerHTML","newsDetail","location","hash","substring","newsContent","i","Number","makeComment","comments","called","arguments","undefined","commentString","router","routePath","indexOf","window","addEventListener"],"mappings":"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","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["const container = document.getElementById(\"root\");\r\nconst ajax = new XMLHttpRequest();\r\nconst content = document.createElement(\"div\");\r\nconst NEWS_URL = \"https://api.hnpwa.com/v0/news/1.json\";\r\nconst CONTENT_URL = \"https://api.hnpwa.com/v0/item/@id.json\";\r\nconst store = {\r\n  currentPage: 1,\r\n  feeds: [],\r\n};\r\n\r\nfunction getData(url) {\r\n  ajax.open(\"GET\", url, false);\r\n  ajax.send();\r\n\r\n  return JSON.parse(ajax.response);\r\n}\r\n\r\nfunction makeFeed(feeds) {\r\n  feeds.forEach((feed) => {\r\n    feed.read = false;\r\n  });\r\n\r\n  return feeds;\r\n}\r\n\r\nfunction newsFeed() {\r\n  let newsFeed = store.feeds;\r\n  const newsList = [];\r\n  let template = `\r\n    <div class=\"bg-gray-600 min-h-screen\">\r\n      <div class=\"bg-white text-xl\">\r\n        <div class=\"mx-auto px-4\">\r\n          <div class=\"flex justify-between items-center py-6\">\r\n            <div class=\"flex justify-start\">\r\n              <h1 class=\"font-extrabold\">Hacker News</h1>\r\n            </div>\r\n            <div class=\"items-center justify-end\">\r\n              <a href=\"#/page/{{__prev_page__}}\" class=\"text-gray-500\">\r\n                Previous\r\n              </a>\r\n              <a href=\"#/page/{{__next_page__}}\" class=\"text-gray-500 ml-4\">\r\n                Next\r\n              </a>\r\n            </div>\r\n          </div> \r\n        </div>\r\n      </div>\r\n      <div class=\"p-4 text-2xl text-gray-700\">\r\n        {{__news_feed__}}        \r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  if (newsFeed.length === 0) {\r\n    newsFeed = store.feeds = makeFeed(getData(NEWS_URL));\r\n  }\r\n\r\n  newsFeed\r\n    .slice((store.currentPage - 1) * 10, store.currentPage * 10)\r\n    .forEach((news) => {\r\n      newsList.push(`\r\n        <div class=\"p-6 ${\r\n          news.read ? \"bg-red-500\" : \"bg-white\"\r\n        } mt-6 rounded-lg shadow-md transition-colors duration-500 hover:bg-green-100\">\r\n          <div class=\"flex\">\r\n            <div class=\"flex-auto\">\r\n              <a href=\"#/show/${news.id}\">${news.title}</a>  \r\n            </div>\r\n            <div class=\"text-center text-sm\">\r\n              <div class=\"w-10 text-white bg-green-300 rounded-lg px-0 py-2\">${\r\n                news.comments_count\r\n              }</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"flex mt-3\">\r\n            <div class=\"grid grid-cols-3 text-sm text-gray-500\">\r\n              <div><i class=\"fas fa-user mr-1\"></i>${news.user}</div>\r\n              <div><i class=\"fas fa-heart mr-1\"></i>${news.points}</div>\r\n              <div><i class=\"far fa-clock mr-1\"></i>${news.time_ago}</div>\r\n            </div>  \r\n          </div>\r\n        </div>    \r\n      `);\r\n    });\r\n\r\n  const totalPages = Math.ceil(newsFeed.length / 10);\r\n\r\n  template = template.replace(\"{{__news_feed__}}\", newsList.join(\"\"));\r\n  template = template.replace(\r\n    \"{{__prev_page__}}\",\r\n    store.currentPage > 1 ? store.currentPage - 1 : 1\r\n  );\r\n  template = template.replace(\r\n    \"{{__next_page__}}\",\r\n    store.currentPage < totalPages ? store.currentPage + 1 : totalPages\r\n  );\r\n\r\n  container.innerHTML = template;\r\n}\r\n\r\nfunction newsDetail() {\r\n  const id = location.hash.substring(7);\r\n  const newsContent = getData(CONTENT_URL.replace(\"@id\", id));\r\n  let template = `\r\n    <div class=\"bg-gray-600 min-h-screen pb-8\">\r\n      <div class=\"bg-white text-xl\">\r\n        <div class=\"mx-auto px-4\">\r\n          <div class=\"flex justify-between items-center py-6\">\r\n            <div class=\"flex justify-start\">\r\n              <h1 class=\"font-extrabold\">Hacker News</h1>\r\n            </div>\r\n            <div class=\"items-center justify-end\">\r\n              <a href=\"#/page/${store.currentPage}\" class=\"text-gray-500\">\r\n                <i class=\"fa fa-times\"></i>\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"h-full border rounded-xl bg-white m-6 p-4 \">\r\n        <h2>${newsContent.title}</h2>\r\n        <div class=\"text-gray-400 h-20\">\r\n          ${newsContent.content}\r\n        </div>\r\n\r\n        {{__comments__}}\r\n\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  for (let i = 0; i < store.feeds.length; i++) {\r\n    if (store.feeds[i].id === Number(id)) {\r\n      store.feeds[i].read = true;\r\n      break;\r\n    }\r\n  }\r\n\r\n  function makeComment(comments, called = 0) {\r\n    const commentString = [];\r\n\r\n    comments.forEach((comments) => {\r\n      commentString.push(`\r\n        <div style=\"padding-left: ${called * 40}px;\" class=\"mt-4\">\r\n          <div class=\"text-gray-400\">\r\n            <i class=\"fa fa-sort-up mr-2\"></i>\r\n            <strong>${comments.user}</strong> ${comments.time_ago}\r\n          </div>\r\n          <p class=\"text-gray-700\">${comments.content}</p>\r\n        </div>  \r\n      `);\r\n\r\n      if (comments.comments.length > 0) {\r\n        commentString.push(makeComment(comments.comments, called + 1));\r\n      }\r\n    });\r\n\r\n    return commentString.join(\"\");\r\n  }\r\n\r\n  container.innerHTML = template.replace(\r\n    \"{{__comments__}}\",\r\n    makeComment(newsContent.comments)\r\n  );\r\n}\r\n\r\nfunction router() {\r\n  const routePath = location.hash;\r\n\r\n  if (routePath === \"\") {\r\n    newsFeed();\r\n  } else if (routePath.indexOf(\"#/page/\") >= 0) {\r\n    store.currentPage = Number(routePath.substring(7));\r\n    newsFeed();\r\n  } else {\r\n    newsDetail();\r\n  }\r\n}\r\n\r\nwindow.addEventListener(\"hashchange\", router);\r\n\r\nrouter();\r\n"]}